<!DOCTYPE html>
<html>




<head>
  <title>Monitor Progress of File Descriptors of Another Process &laquo; Python recipes &laquo; ActiveState Code</title>
  <meta http-equiv="X-UA-Compatible" content="IE=8" />
  <link rel="stylesheet" href="/static/css/activestyle.css" type="text/css"/>
  <!--[if IE]>
    <link rel="stylesheet" href="/static/css/ie.css" type="text/css" />
  <![endif]-->
  <!--[if IE 7]>
    <link rel="stylesheet" href="/static/css/ie7.css" type="text/css" />
  <![endif]-->
  <!--[if IE 6]>
    <link rel="stylesheet" href="/static/css/ie6.css" type="text/css" />
  <![endif]-->
  <link href="/static/prettify/prettify.css" type="text/css" rel="stylesheet" />

  <link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:bold&subset=latin' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:bold' rel='stylesheet' type='text/css'>


  <link rel="alternate" href="/feeds/news/" type="application/atom+xml" title="ActiveState Code News" />

  <link type="image/x-icon" href="/static/activestyle/img/favicon.ico" rel="shortcut icon"/>

  <script src="/static/js/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="/static/js/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script>
  <script src="/static/js/jquery-form-2.36.js" type="text/javascript"></script>



<link rel="canonical" href="/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/" />
<!--[if IE]><style type="text/css"> div.codeblock, pre.prettyprint { overflow: visible; overflow-x: auto; overflow-y: hidden; padding-bottom:15px; } </style><![endif]-->



  <!-- Start Google Analytics tracking code -->
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20072-24', 'auto', {'allowLinker': true});
    ga('require', 'linker');
    ga('linker:autoLink', ['activestate.com', 'stackato.com', 'komodoide.com']);
    ga('require', 'linkid', 'linkid.js');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics tracking code -->


</head>
<body >
<div id="as_wrapper">

<ul class="as_skip">
  <li><a href="#q">Skip to Search</a></li>
  <li><a href="#site_nav">Skip to Navigation</a></li>
  <li><a href="#as_content">Skip to Content</a></li>
</ul>

<div id="as_header_wrapper" class="nosearchhi">
<div id="as_header">
  <div id="as_navbar" class="as_navbar_short">
    <ul id="as_sitesnav">
      <li class="as_logo"><a href="//www.activestate.com/"><img height="18" width="90" src="/static/activestyle/img/activestate.png" title="ActiveState | The Dynamic Language Experts"></a></li>
      <span class="as_navsep"></span>
      <li><a href="//community.activestate.com/">Community</a></li>
      <span class="as_navsep">|</span>
      <li><b><a href="/">Code</a></b></li>
      <span class="as_navsep">|</span>
      <li><a href="http://docs.activestate.com/">Docs</a></li>
      <span class="as_navsep">|</span>
      <li class="as_sitesnav_more"><a onclick="$('#as_sitesnav_downloads').slideToggle(100); return false;" href="//www.activestate.com/downloads" ><u>Downloads</u>  <small>&#9660;</small></a>
        <ul style="display: none;" id="as_sitesnav_downloads">
          <li><a href="//www.activestate.com/activeperl/downloads" title="Download Perl">ActivePerl</a></li>
          <li><a href="//www.activestate.com/activepython/downloads" title="Download Python">ActivePython</a></li>
          <li><a href="//www.activestate.com/activetcl/downloads" title="Download Tcl">ActiveTcl</a></li>
          <li><a href="//www.activestate.com/activeperl-pro-studio/downloads" title="Download ActivePerl Pro Studio">ActivePerl Pro Studio</a></li>
          <li><a href="//www.activestate.com/activetcl-pro-studio/downloads" title="Download ActiveTcl Pro Studio">ActiveTcl Pro Studio</a></li>
          <li><a href="//www.activestate.com/perl-dev-kit/downloads" title="Download Perl Dev Kit">Perl Dev Kit</a></li>
          <li><a href="//www.activestate.com/tcl-dev-kit/downloads" title="Download Tcl Dev Kit">Tcl Dev Kit</a></li>
          <li><a href="//www.activestate.com/komodo-ide/downloads" title="Download Komodo IDE">Komodo IDE</a></li>
        </ul>
      </li>
      <span class="as_navsep">|</span>
      <li class="as_sitesnav_more"><a href="//www.activestate.com/community" onclick="$('#as_sitesnav_more').slideToggle(100); return false;"><u>more</u> <small>&#9660;</small></a>
        <ul id="as_sitesnav_more" style="display: none;">
          <li><a href="//lists.activestate.com/">Lists</a></li>
          <li><a href="//bugs.activestate.com/">Bugs</a></li>
          <li><a href="//code.activestate.com/ppm">PPM Index</a></li>
          <li><a href="//code.activestate.com/pypm">PyPM Index</a></li>
        </ul>
      </li>
    </ul>
    <script type="text/javascript">
      $('body').click(function() { $('#as_sitesnav_more').hide(); $('#as_sitesnav_downloads').hide(); });
    </script>

    <div id="as_accountnav">

      Welcome, guest
      <span class="as_navsep">|</span> <a href="https://account.activestate.com/signin/?next=https%3A//code.activestate.com/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/%3Fin%3Duser-4182236">Sign In</a>

      <span class="as_navsep">|</span> <a href="https://account.activestate.com/">My Account</a>
      <span class="as_navsep">|</span> <a href="https://store.activestate.com/">Store</a>
      <span class="as_navsep">|</span> <a href="https://store.activestate.com/cart" class="icon-cart">Cart</a>
    </div>
  </div>

  <div id="as_bannerbar">

<div id="site_logo" class="as_banner_text">
  <a class="as_banner_text" href="/">ActiveState Code</a> &raquo; <a href="/recipes/" class="as_banner_text">Recipes</a>
</div>

<div id="site_nav">
  <form id="search_form" action="/search/recipes/">
    <input size="24" id="q" name="q" accesskey="s"/>
    <input type="submit" value="Search" />
  </form>
</div>

    <div style="clear:both"></div>
  </div>

</div> <!-- end of as_header -->

<div id="as_sub_banner">
  <div id="as_sub_site_nav">
    <div id="as_sub_site_links">

  <a href="/recipes/add/" title="Add a Recipe">Add a Recipe</a>
  <a href="/recipes/langs/">Languages</a>
  <a href="/recipes/tags/">Tags</a>
  <a href="/recipes/users/">Authors</a>
  <a href="/recipes/sets/">Sets</a>


    </div>
  </div>
</div> <!-- end of as_sub_banner -->

</div> <!-- end of as_header_wrapper -->


<div id="as_middle">
  <div id="as_content_wrapper">
    <div id="as_content">

      <div id="page_header">
        <h1>
Monitor Progress of File Descriptors of Another Process
(Python recipe)
<span class="print_only secondary">by Alfe</span>

<div class="print_only secondary" style="margin-top: 10px;">
  ActiveState Code (http://code.activestate.com/recipes/578882/)
</div>
</h1>
      </div>


      <div id="content">

<table class="gutter_table"><tr>
<td class="gutter">





<div id="recipe_scorevote">
<form action="/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/up/" method="POST"><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='67d0cb4621115cec2b33f481351d9150' /></div>
<button class=" upvote" title="Vote up" type="submit">&#x25b2;</button>
</form>
<div class="recipe_score ">1</div>
<form action="/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/down/" method="POST"><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='67d0cb4621115cec2b33f481351d9150' /></div>
<button class=" downvote" title="Vote down" type="submit">&#x25bc;</button>
</form>
</div>

</td>
<td>

  <div id="description">
  <p>This tool (inspired by azat@stackoverflow, see <a href="http://stackoverflow.com/a/16082562/1281485" rel="nofollow">http://stackoverflow.com/a/16082562/1281485</a>) allows to watch the progress of the file descriptors of another process.  This can be used, for example, if you transfer a file to another host and the transferring program does not show any progress indication itself.  Instead of waiting blindly until the routine is done, with this tool you can use Linux's proc file system to monitor the progress of the other process while it walks through the file.</p>

<p>The tool continuously monitors the position in and the size of the files the given process's file descriptors point to.  For growing (or shrinking, but that's very unusual) files, a time when it was (or will be) empty is computed ("emptyTime"), for moving file descriptors (the typical case), the time when it started at position 0 ("startTime"), the time when it will reach the current size of the file ("reachTime") and when it will meet with the end of a growing (or shrinking) file is computed ("meetTime").</p>

<p>For fixed-size files the meetTime will be the same as the reachTime of course.  The meetTime only makes sense in case a file is growing and at the same time read (e. g. when a movie is downloaded to a file by one process and converted by a different process; using this tool can tell you when the converter process might run dry on the input because the download wasn't fast enough, and in this case you maybe can pause the converter to prevent this situation).</p>

<p>The tool is designed as a library; the display of the information is independent from the gathering of the data.  Please feel free to create more fancy displays, add percentage output etc.</p>

  </div>

  <div id="blocks">

    <div id="block-0" class="block">

      <div class="block-toolbar as_secondary">
        <span style="float: right;">Python, 138 lines</span>
        <div class="block-toolbar-button"><a href="/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/download/1/"><img src="/static/img/bullet_disk.png"/>Download</a></div>
        <div id="clipboard_container" class="block-toolbar-button" style="position: relative; display: none;"><div id="clipboard_button"><img src="/static/img/bullet_go16.png"/>Copy to clipboard</div></div>

      </div>
      <div class="codeblock">
      <table class="highlighttable"><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138</pre></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c">#</span>
<span class="c"># fdprogress.py -- by Alfe (alfe@alfe.de), inspired by azat@Stackoverflow</span>
<span class="c">#</span>
<span class="c"># usage:  fdprogress.py &lt;pid&gt;</span>
<span class="c">#</span>

<span class="k">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">os.path</span>

<span class="k">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">defaultdict</span>

<span class="k">def</span> <span class="nf">getFds</span><span class="p">(</span><span class="n">pid</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&#39;/proc/</span><span class="si">%s</span><span class="s">/fd/&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">getPos</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">):</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;/proc/</span><span class="si">%s</span><span class="s">/fdinfo/</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()[</span><span class="mf">5</span><span class="p">:])</span>

<span class="k">def</span> <span class="nf">getSize</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">getPath</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">FdIsPipe</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span>

<span class="k">def</span> <span class="nf">getPath</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">):</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">readlink</span><span class="p">(</span><span class="s">&#39;/proc/</span><span class="si">%s</span><span class="s">/fd/</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;pipe:[&#39;</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">FdIsPipe</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">extendHistory</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">fd</span> <span class="ow">in</span> <span class="n">getFds</span><span class="p">(</span><span class="n">pid</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">history</span><span class="p">[</span><span class="n">fd</span><span class="p">,</span> <span class="n">getPath</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">getPos</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">),</span> <span class="n">getSize</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">)))</span>
    <span class="k">except</span> <span class="n">FdIsPipe</span><span class="p">:</span>
      <span class="k">pass</span>  <span class="c"># ignore fds to pipe</span>

<span class="k">def</span> <span class="nf">initHistory</span><span class="p">(</span><span class="n">pid</span><span class="p">):</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
  <span class="n">extendHistory</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">reduceHistory</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">history</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">2</span><span class="p">:</span>
      <span class="k">del</span> <span class="n">value</span><span class="p">[</span><span class="mf">1</span><span class="p">:</span><span class="o">-</span><span class="mf">2</span><span class="p">]</span>  <span class="c"># only keep first and last</span>
      <span class="c"># (this can be more clever in the future)</span>

<span class="k">def</span> <span class="nf">entryPrediction</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
  <span class="n">t1</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">size1</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
  <span class="n">t2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">size2</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">:</span>  <span class="c"># no time passed yet?</span>
    <span class="k">return</span> <span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">size2</span><span class="p">),</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>
  <span class="n">growth</span> <span class="o">=</span> <span class="p">(</span><span class="n">size2</span> <span class="o">-</span> <span class="n">size1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">)</span>  <span class="c"># bytes/sec growth of file</span>
  <span class="k">if</span> <span class="n">growth</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">:</span>
    <span class="n">tSize0</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">size1</span> <span class="o">/</span> <span class="n">growth</span>  <span class="c"># time when size was 0</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">tSize0</span> <span class="o">=</span> <span class="bp">None</span>
  <span class="n">speed</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos2</span> <span class="o">-</span> <span class="n">pos1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">)</span>  <span class="c"># speed of pos in bytes/sec</span>
  <span class="k">if</span> <span class="n">speed</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">:</span>
    <span class="n">tPos0</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">pos1</span> <span class="o">/</span> <span class="n">speed</span>  <span class="c"># time when pos was 0</span>
    <span class="n">tPosSize2</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="p">(</span><span class="n">size2</span> <span class="o">-</span> <span class="n">pos1</span><span class="p">)</span> <span class="o">/</span> <span class="n">speed</span>  <span class="c"># time of pos reaching size2</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">tPos0</span> <span class="o">=</span> <span class="n">tPosSize2</span> <span class="o">=</span> <span class="bp">None</span>
  <span class="k">if</span> <span class="n">speed</span> <span class="o">!=</span> <span class="n">growth</span><span class="p">:</span>  <span class="c"># when will both meet?</span>
    <span class="n">tm</span> <span class="o">=</span> <span class="n">t2</span> <span class="o">+</span> <span class="p">(</span><span class="n">size2</span> <span class="o">-</span> <span class="n">pos2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">speed</span> <span class="o">-</span> <span class="n">growth</span><span class="p">)</span>
    <span class="n">sizeM</span> <span class="o">=</span> <span class="n">size2</span> <span class="o">+</span> <span class="n">growth</span> <span class="o">*</span> <span class="p">(</span><span class="n">tm</span> <span class="o">-</span> <span class="n">t2</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">tm</span> <span class="o">=</span> <span class="n">sizeM</span> <span class="o">=</span> <span class="bp">None</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">size2</span><span class="p">),</span> <span class="n">growth</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">tSize0</span><span class="p">,</span> <span class="n">tPos0</span><span class="p">,</span>
          <span class="n">tPosSize2</span><span class="p">,</span> <span class="n">tm</span><span class="p">,</span> <span class="n">sizeM</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">eachPrediction</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">history</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="k">yield</span> <span class="n">entryPrediction</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">displayTime</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="s">&quot;&lt;&gt;&quot;</span>
  <span class="n">d</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">lt</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
  <span class="k">except</span><span class="p">:</span>
    <span class="k">return</span> <span class="s">&quot;??&quot;</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">F (now</span><span class="si">%+d</span><span class="s">y)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mf">86400</span><span class="o">/</span><span class="mf">365</span><span class="p">),</span> <span class="n">lt</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">2</span> <span class="o">*</span> <span class="mf">86400</span> <span class="o">*</span> <span class="mf">365</span> <span class="k">else</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">F (now</span><span class="si">%+d</span><span class="s">M)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mf">86400</span><span class="o">/</span><span class="mf">30</span><span class="p">),</span> <span class="n">lt</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">2</span> <span class="o">*</span> <span class="mf">86400</span> <span class="o">*</span> <span class="mf">30</span> <span class="k">else</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">F (now</span><span class="si">%+d</span><span class="s">d)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mf">86400</span><span class="p">),</span> <span class="n">lt</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">2</span> <span class="o">*</span> <span class="mf">86400</span> <span class="k">else</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">a, </span><span class="si">%%</span><span class="s">T (now</span><span class="si">%+d</span><span class="s">h)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mf">3600</span><span class="p">),</span> <span class="n">lt</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%F</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">lt</span><span class="p">)</span> <span class="o">!=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%F</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span> <span class="k">else</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">T (now</span><span class="si">%+d</span><span class="s">h)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mf">3600</span><span class="p">),</span> <span class="n">lt</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">2</span> <span class="o">*</span> <span class="mf">3600</span> <span class="k">else</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">T (now</span><span class="si">%+d</span><span class="s">m)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mf">60</span><span class="p">),</span> <span class="n">lt</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">2</span> <span class="o">*</span> <span class="mf">60</span> <span class="k">else</span>
    <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%%</span><span class="s">T (now</span><span class="si">%+d</span><span class="s">s)&quot;</span> <span class="o">%</span> <span class="n">d</span><span class="p">,</span> <span class="n">lt</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">displaySize</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="s">&quot;&lt;&gt;&quot;</span> <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span>
    <span class="s">&quot;</span><span class="si">%d</span><span class="s"> B&quot;</span> <span class="o">%</span> <span class="n">size</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mf">1e3</span> <span class="k">else</span>
    <span class="s">&quot;</span><span class="si">%.2f</span><span class="s"> kB&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mf">1e3</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mf">1e6</span> <span class="k">else</span>
    <span class="s">&quot;</span><span class="si">%.2f</span><span class="s"> MB&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mf">1e6</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mf">1e9</span> <span class="k">else</span>
    <span class="s">&quot;</span><span class="si">%.2f</span><span class="s"> GB&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mf">1e9</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">displaySpeed</span><span class="p">(</span><span class="n">speed</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">displaySize</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;/s&quot;</span>

<span class="k">def</span> <span class="nf">printPrediction</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">size2</span><span class="p">),</span> <span class="n">growth</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">tSize0</span><span class="p">,</span> <span class="n">tPos0</span><span class="p">,</span>
       <span class="n">tPosSize2</span><span class="p">,</span> <span class="n">tm</span><span class="p">,</span> <span class="n">sizeM</span><span class="p">)</span> <span class="ow">in</span> <span class="n">eachPrediction</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">fd</span><span class="p">,</span> <span class="s">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">dT</span> <span class="o">=</span> <span class="n">displayTime</span>
    <span class="n">dSi</span> <span class="o">=</span> <span class="n">displaySize</span>
    <span class="n">dSp</span> <span class="o">=</span> <span class="n">displaySpeed</span>
    <span class="k">print</span> <span class="s">&quot;size:&quot;</span><span class="p">,</span> <span class="n">dSi</span><span class="p">(</span><span class="n">size2</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">growth:&quot;</span><span class="p">,</span> <span class="n">dSp</span><span class="p">(</span><span class="n">growth</span><span class="p">),</span> \
          <span class="s">&quot;</span><span class="se">\t\t</span><span class="s">pos:&quot;</span><span class="p">,</span> <span class="n">dSi</span><span class="p">(</span><span class="n">pos2</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">speed:&quot;</span><span class="p">,</span> <span class="n">dSp</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;emptyTime:&quot;</span><span class="p">,</span> <span class="n">dT</span><span class="p">(</span><span class="n">tSize0</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">startTime:&quot;</span><span class="p">,</span> <span class="n">dT</span><span class="p">(</span><span class="n">tPos0</span><span class="p">),</span> \
          <span class="s">&quot;</span><span class="se">\t</span><span class="s">reachTime:&quot;</span><span class="p">,</span> <span class="n">dT</span><span class="p">(</span><span class="n">tPosSize2</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">meetTime:&quot;</span><span class="p">,</span> <span class="n">dT</span><span class="p">(</span><span class="n">tm</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
  <span class="n">pid</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
  <span class="n">history</span> <span class="o">=</span> <span class="n">initHistory</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;clear&#39;</span><span class="p">)</span>
    <span class="n">printPrediction</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>
    <span class="n">extendHistory</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
    <span class="n">reduceHistory</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="k">import</span> <span class="nn">sys</span>
  <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">))</span>
</pre></div>
</td></tr></table>
      </div>

    </div>

  </div>
  <div id="recipe_tools">
    <!-- AddThis Button BEGIN -->
    <script type="text/javascript">var addthis_config = {services_compact: 'delicious,digg,reddit,twitter,email,favorites,more', username: 'xa-4b4f86a749591ece', data_use_flash: false};</script>
    <a class="addthis_button"></a>
    <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js"></script>
    <!-- AddThis Button END -->
    <a href="/help/feedback/?type=flag&subject=Flag recipe 578882&amp;text=Please indicate **why** you want to flag that recipe."><img src="/static/img/flag.png"/></a>
  </div>


  <div class="print_only">
    Tags: <a href="/recipes/tags/file_descriptor/">file_descriptor</a>, <a href="/recipes/tags/monitor/">monitor</a>, <a href="/recipes/tags/prediction/">prediction</a>, <a href="/recipes/tags/proc/">proc</a>, <a href="/recipes/tags/process/">process</a>, <a href="/recipes/tags/progress/">progress</a>, <a href="/recipes/tags/watch/">watch</a>
  </div>


</td></tr></table> <!-- end of gutter_table -->





<div id="addcomment">
  <h4 class="section_header">Add a comment</h4>
  <div class="section">
    <div class="comment_gutter">

    </div>
    <div class="comment_content">

        <p id="signin_to_comment"><a href="https://account.activestate.com/signin/?next=https%3A//code.activestate.com/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/%3Fin%3Duser-4182236">Sign in</a> to comment</p>

    </div>
  </div>
</div>

      </div> <!-- end of content -->
    </div> <!-- end of as_content -->
  </div> <!-- end of as_content_wrapper -->

  <div id="as_sidebar_wrapper">
    <div id="as_sidebar">


<div id="as_sidebar_dynamic">




<table class="gravatar">
<tr><td style="width: 40px;">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b47436d86ccccd44c0a846f0659ac25f&amp;d=identicon&s=30" height="30" width="30"/>
</td><td>
Created by <a href="/recipes/users/4182236/">Alfe</a>
on <span class="nowrap">Mon, 19 May 2014</span>
(<a href="/recipes/tags/meta:license=mit/" title="Licensed under the MIT License">MIT</a>)
</td></tr>
</table>

<table class="prevnext">

<tr class="prevnext-lang-python">
<td><a class="prevnext_arrow" href="/recipes/578881-automated-stock-market-trading-simulation/?in=lang-python" title="Previous element in Python recipes">&#x25C4;</a></td>
<td class="prevnext_label"><a href="/recipes/langs/python">Python recipes (4478)</a></td>
<td><a class="prevnext_arrow" href="/recipes/578883-git-pre-commit-hook-to-reject-large-files-using-py/?in=lang-python" title="Next element in Python recipes">&#x25BA;</a></td>
</tr>

<tr class="prevnext-user-4182236 prevnext-current">
<td><a class="prevnext_arrow" href="/recipes/578857-gimp-paperwhite-scriptfu/?in=user-4182236" title="Previous element in Alfe&#39;s recipes">&#x25C4;</a></td>
<td class="prevnext_label"><a href="/recipes/users/4182236">Alfe&#39;s recipes (8)</a></td>
<td><a class="prevnext_arrow" href="/recipes/579092-data-a-class-for-arbitrary-data/?in=user-4182236" title="Next element in Alfe&#39;s recipes">&#x25BA;</a></td>
</tr>

<tr class="prevnext-set-76">
<td>&#x25C4;</td>
<td class="prevnext_label"><a href="/recipes/sets/76">Python system (1)</a></td>
<td>&#x25BA;</td>
</tr>

</table>





<div id="tags">
<h3>Tags</h3>
<ul class="nomachinetags flat"><li class="tag" id="tag-li-2923"><a href="/recipes/tags/file_descriptor/" class="tag">file_descriptor</a></li><li class="tag" id="tag-li-597"><a href="/recipes/tags/monitor/" class="tag">monitor</a></li><li class="tag" id="tag-li-4450"><a href="/recipes/tags/prediction/" class="tag">prediction</a></li><li class="tag" id="tag-li-934"><a href="/recipes/tags/proc/" class="tag">proc</a></li><li class="tag" id="tag-li-83"><a href="/recipes/tags/process/" class="tag">process</a></li><li class="tag" id="tag-li-518"><a href="/recipes/tags/progress/" class="tag">progress</a></li><li class="tag" id="tag-li-3189"><a href="/recipes/tags/watch/" class="tag">watch</a></li></ul><a class="machine_tag_toggle"><span>&#x25b6; Show</span> machine tags (9)</a> <a class="machine_tag_help" href="/help/tags/" title="help about tags and machine tags"><img src="/static/img/help.png"/></a><ul class="machinetags flat"><li class="tag" id="tag-li-2085"><a href="/recipes/tags/meta:language=python/" class="tag">meta:language=python</a></li><li class="tag" id="tag-li-2086"><a href="/recipes/tags/meta:license=mit/" class="tag">meta:license=mit</a></li><li class="tag" id="tag-li-2160"><a href="/recipes/tags/meta:loc=138/" class="tag">meta:loc=138</a></li><li class="tag" id="tag-li-2605"><a href="/recipes/tags/meta:min_python_2=7/" class="tag">meta:min_python_2=7</a></li><li class="tag" id="tag-li-1415"><a href="/recipes/tags/meta:requires=time/" class="tag">meta:requires=time</a></li><li class="tag" id="tag-li-1410"><a href="/recipes/tags/meta:requires=os.path/" class="tag">meta:requires=os.path</a></li><li class="tag" id="tag-li-1407"><a href="/recipes/tags/meta:requires=os/" class="tag">meta:requires=os</a></li><li class="tag" id="tag-li-1741"><a href="/recipes/tags/meta:requires=collections/" class="tag">meta:requires=collections</a></li><li class="tag" id="tag-li-1378"><a href="/recipes/tags/meta:score=1/" class="tag">meta:score=1</a></li></ul>



</div>

<div id="requires">
  <h3>Required Modules</h3>
  <ul class="flat">

  <li><a href="/recipes/langs/python/tags/meta:requires=collections/">collections</a>




  </li>

  <li><a href="/recipes/langs/python/tags/meta:requires=os/">os</a>




  </li>

  <li><a href="/recipes/langs/python/tags/meta:requires=os.path/">os.path</a>




  </li>

  <li><a href="/recipes/langs/python/tags/meta:requires=time/">time</a>




  </li>

  </ul>


</div>


<div id="otherinfo">
<h3>Other Information and Tasks</h3>
<ul class="action_list">

  <li><a href="/recipes/add/?fork=578882">Fork this recipe</a></li>
  <li>Licensed under the <a href="/recipes/tags/meta:license=mit/">MIT License</a></li>
  <li>Viewed 3176 times</li>



  <li><a href="history/1/" title="Recipe history">Revision 1</a>
  </li>

</ul>
</div>

</div>


<div style="margin: 30px 15px;">

<script type='text/javascript'><!--//<![CDATA[
  var m3_u = (location.protocol=='https:'?'https://ads.activestate.com/www/delivery/ajs.php':'http://ads.activestate.com/www/delivery/ajs.php');
  var m3_r = Math.floor(Math.random()*99999999999);
  if (!document.MAX_used) document.MAX_used = ',';
  document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
  document.write ("?zoneid=1");
  document.write ('&amp;cb=' + m3_r);
  if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
  document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
  document.write ("&amp;loc=" + escape(window.location));
  if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
  if (document.context) document.write ("&context=" + escape(document.context));
  if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
  document.write ("'><\/scr"+"ipt>");
//]]>--></script><noscript><a href='http://ads.activestate.com/www/delivery/ck.php?n=aa9dea02&amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'><img src='http://ads.activestate.com/www/delivery/avw.php?zoneid=1&amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;n=aa9dea02' border='0' alt='' /></a></noscript>
</div>


    </div> <!-- end of sidebar -->
  </div> <!-- end of as_sidebar_wrapper -->

  <div class="as_clear">&nbsp;</div>
</div> <!-- end of as_middle -->


<div id="as_footer_wrapper" class="as_footer2 nosearchhi">
<div id="as_footer">
<div class="as_footer2_section">
  <h4 class="as_footer2_header">Accounts</h4>
  <ul>

    <li><a href="https://account.activestate.com/signup/?activationnext=https%3A//code.activestate.com/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/%3Fin%3Duser-4182236">Create Account (Free!)</a></li>
    <li><a href="https://account.activestate.com/signin/?next=https%3A//code.activestate.com/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/%3Fin%3Duser-4182236">Sign In</a></li>


  </ul>
</div>
<div class="as_footer2_section">
  <h4 class="as_footer2_header">Code Recipes</h4>
  <ul>

<li><a href="/recipes/add/">Add a recipe</a></li>
<li><a href="/recipes/">Recipes</a></li>
<li><a href="/recipes/langs/">Languages</a></li>
<li><a href="/recipes/tags/">Tags</a></li>
<li><a href="/recipes/users/">Authors</a></li>
<li><a href="/recipes/sets/">Sets</a></li>

  </ul>
</div>
<div class="as_footer2_section">
  <h4 class="as_footer2_header">Feedback & Information</h4>
  <ul>
    <li><a href="/help/feedback/?type=general">Give Site Feedback</a></li>
    <li><a href="/help/feedback/?type=bug&subject=Problem on page '/recipes/578882-monitor-progress-of-file-descriptors-of-another-pr/'">Report a Site Problem</a></li>
    <li style="margin-top: 10px;"><a href="/about/">About</a></li>
    <li><a href="/help/faq/">FAQ</a></li>
    <li><a href="/help/terms/">Terms of Service</a></li>
  </ul>
</div>
<div class="as_footer2_section">
  <h4 class="as_footer2_header">ActiveState</h4>
  <ul>
    <li class="as_footer2_feed"><a href="//www.activestate.com/blog">ActiveState Blog</a></li>
    <li><a title="Perl Solutions" href="//www.activestate.com/perl">Perl Solutions</a></li>
    <li><a title="Python Solutions" href="//www.activestate.com/python">Python Solutions</a></li>
    <li><a title="Tcl Solutions" href="//www.activestate.com/tcl">Tcl Solutions</a></li>
    <li><a title="Download Perl" href="//www.activestate.com/activeperl/downloads">Download ActivePerl</a></li>
    <li><a title="Download Python" href="//www.activestate.com/activepython/downloads">Download ActivePython</a></li>
    <li><a title="Download Tcl" href="//www.activestate.com/activetcl/downloads">Download ActiveTcl</a></li>
    <li style="margin-top: 10px"><a href="//www.activestate.com/company">About ActiveState</a></li>
    <li><a href="//www.activestate.com/company/careers">Careers</a></li>
  </ul>
</div>
<div class="as_footer2_copyright">
  <p>
  <a href="//www.activestate.com/privacy-policy">Privacy Policy</a>
  | <a href="//www.activestate.com/company/contact-us">Contact Us</a>
  | <a href="//www.activestate.com/support">Support</a>
  </p>
  <p>&copy; 2016 ActiveState Software Inc. All rights reserved.
  ActiveState&reg;, Komodo&reg;, ActiveState Perl Dev Kit&reg;,
  ActiveState Tcl Dev Kit&reg;, ActivePerl&reg;, ActivePython&reg;,
  and ActiveTcl&reg; are registered trademarks of ActiveState.
  All other marks are property of their respective owners.</p>
</div>
</div> <!-- end of as_footer -->
</div> <!-- end of as_footer_wrapper -->

<div id="as_messagebar" style="display: none;">
  <span style="float: right;">
    <b onclick="$('#as_messagebar').slideUp(150);" style="cursor: pointer;">&nbsp;x&nbsp;</b>
  </span>
  <span class="message">&nbsp;</span>
  <span class="message-undo" style="display: none;">
    <form method="POST" action=""><button type="submit"><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='67d0cb4621115cec2b33f481351d9150' /></div><u>Undo</u></button></form>
  </span>
</div>

</div> <!-- end of as_wrapper -->


<script src="/static/prettify/prettify.js"></script>
<script type="text/javascript">
 $(function() {
    prettyPrint();
 });
</script>








<script src="/static/js/flash_detect_min.js" type="text/javascript"></script>
<script src="/static/zeroclipboard/ZeroClipboard.js" type="text/javascript"></script>
<script src="/static/js/recipes.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
    Recipes.hijax_sidebar();
    Recipes.hijax_voting();
    // hide machine tags by default
    Recipes.toggle_machine_tags(false);
    Recipes.highlight_last_comment();
    // setup copy button
    Recipes.setup_copy_button("", "");
    // Pre-load wait animation used for voting buttons.
    $('<img src="/static/img/ajax-loader.gif"/>');
});
var in_param = "user-4182236";
</script>






    <!-- python tracking -->
    <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1071420929;
    var google_conversion_language = "en";
    var google_conversion_format = "3";
    var google_conversion_color = "666666";
    var google_conversion_label = "qWX3CIvQhAIQgazy_gM";
    var google_conversion_value = 0;
    /* ]]> */
    </script>
    <script type="text/javascript" src="https://www.googleadservices.com/pagead/conversion.js">
    </script>
    <noscript>
    <div style="display:inline;">
    <img height="1" width="1" style="border-style:none;" alt="" src="https://www.googleadservices.com/pagead/conversion/1071420929/?label=qWX3CIvQhAIQgazy_gM&amp;guid=ON&amp;script=0"/>
    </div>
    </noscript>






</body>
</html>
